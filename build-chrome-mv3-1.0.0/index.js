!function(){"use strict";var e=chrome;const n={SEARCH:"search-only",WORKING:"working",READY:"reset",NOTIFICATION:"notification",GET_SELECTION:"get-selection"},t=e.runtime.getURL("icons/Imageshare-logo-no-text.png"),o=(e,n)=>{new Notification(e,{body:n,icon:t})},i="granted",r=["Imageshare Browser Extension","chrome-mv3","1.0.0","production"];console.debug("Loading:",r.join(" • ")),e.runtime.onMessage.addListener(((t,r,s)=>{if(console.debug("Index receiving message",t),"content"!==t.target)return!0;if(t.command===n.GET_SELECTION){const e=(window.getSelection?window.getSelection().toString():"").trim();e.length&&s(e),s(null)}return t.command===n.NOTIFICATION&&(e=>{if(Notification.permission===i)return o(e.title,e.message);"denied"!==Notification.permission&&Notification.requestPermission().then((n=>{if(n===i)return o(e.title,e.message)}))})(t),t.command===n.SEARCH&&e.runtime.sendMessage({command:n.BACKGROUND_SEARCH,type:t.type,selection:t.selection}),t.command===n.WORKING&&(document.body.style.cursor="wait"),t.command===n.READY&&(document.body.style.cursor="default"),!0})),window.matchMedia("(prefers-color-scheme: dark)").matches&&(console.debug("Switching to dark theme."),chrome.runtime.sendMessage({target:"background",scheme:"dark"})),console.debug("Content script ready:",r.join(" • "))}();